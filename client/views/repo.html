<template name="repo">
	{{> header}}
	<div class="centered row">
		<div class="four wide column">
			{{> profile}}
		</div>
		<div class="eleven wide column">
			<div class="ui basic segment">
				<div>
					{{#if isOwner}}
					<div class="ui mini red basic vertical animated button right floated">
						<div class="hidden content">Delete</div>
						<div class="visible content">	
							<i class="delete icon"></i>
						</div>
					</div>
					{{/if}}
					<div>
						<h2 class="ui header">
							<i class="slack teal icon left floated"></i> {{repo.title}}
							<div class="sub header">{{setLastUpdate repo.last_update}}</div>
						</h2>
						<!-- <i class="star link {{#if subscribed}}yellow{{/if}} icon"></i>
						<i class="copy link icon"></i> -->
					</div>
				</div>
				<!-- <div class="ui hidden divider"></div>
				<a class="ui small yellow image label">
					<i class="star icon"></i>
					Subscriber
					<span class="detail">23 490</span>
				</a>
				<a class="ui small green image label">
					<i class="copy icon"></i>
					Copier
					<span class="detail">6375</span>
				</a>
				<a class="ui small purple image label">
					<i class="download icon"></i>
					Downloader
					<span class="detail">234</span>
				</a> -->
				<div class="ui mini statistics">
					<div class="statistic">
						<div class="value">
							<i class="ui download grey-light icon"></i>
						</div>
						<span>27</span>
						<span class="label">Download</span>
					</div>
					<div class="statistic">
						<div class="value">
							<i class="ui heart grey-light icon"></i>
						</div>
						<span>36</span>
						<span class="label">Followers</span>
					</div>
					<div class="statistic">
						<div class="value">
							<i class="ui folder grey-light icon"></i>
						</div>
						<span>{{#if repo.nb_folders}} {{repo.nb_folders}} {{else}} 0 {{/if}}</span>
						<span class="label">Folders</span>
					</div>
					<div class="statistic">
						<div class="value">
							<i class="ui file grey-light icon"></i>
						</div>
						<span>{{#if repo.nb_files}} {{repo.nb_files}} {{else}} 0 {{/if}}</span>
						<span class="label">Files</span>
					</div>
				</div>
			</div>
			<!--<h4 class="ui horizontal header divider">
				<i class="small file icon"></i>
				Files
			</h4> -->
			<div class="ui segment">
				
				{{#if isOwner}}

					<div class="ui buttons right floated">
						<div id="add" class="ui basic teal small button">
							<i class="add icon"></i>
							Add
						</div>
						<div id="add_dropdown" class="ui combo floating dropdown icon button">
							<i class="dropdown small icon"></i>
							<div class="menu">
								<div class="item">
									<i id="add_folder_button" class="folder icon"></i>
									Add Folder(s)
								</div>
								<div class="item">
									<i id="upload_button" class="file icon"></i>
									Add File(s)
								</div>
								<!-- <div class="item">
									<i class="linkify icon"></i>
									Add Link(s)
								</div> -->
							</div>
						</div>
					</div>

<!-- 					<div class="ui buttons">
						<div id="filter_dropdown" class="ui simple floating small basic blue labeled dropdown icon button">
							<span class="text">Filters</span>
							<i class="filter icon"></i>
							<div class="menu">
								<div class="item">
									<div class="ui checkbox">
										<input type="checkbox">
										<label>Folders</label>
									</div>
								</div>
								<div class="item">
									<div class="ui checkbox">
										<input type="checkbox">
										<label>Files</label>
									</div>
								</div>
								<div class="item">
									<div class="ui checkbox">
										<input type="checkbox">
										<label>Links</label>
									</div>
								</div>
							</div>
						</div>
					</div> -->

					<div class="ui buttons">
						<div id="history_dropdown" class="ui floating small basic pink labeled dropdown icon button">
							<span class="text">History</span>
							<i class="history icon"></i>
							<div class="menu">
								<div class="item">
									<i class="clock icon"></i>
									Added 3 files, 1 folder one hour ago
								</div>
							</div>
						</div>
					</div>
				{{/if}}
				<table class="ui small table grey">
					<thead>
						<tr>
							<th colspan="3">
								<div class="ui right aligned grid">
									<div class="right floated right aligned eight wide column">
										{{#if tmpFiles}}
										<div class="ui tiny teal label">
											{{#if nbTmpFolder}} {{nbTmpFolder}} new folder{{/if}}
											{{#if nbTmpFiles}}{{#if nbTmpFolder}}, {{/if}} {{nbTmpFiles}} new files{{/if}}
										</div>
										<div id="cancel" class="ui basic compact mini icon red button">
											<i class="delete icon"></i>
										</div>
										<div  id="publish" class="ui basic compact mini icon green button">
											<i class="check icon"></i>
										</div>
										{{/if}}
									</div>
									<div class="left aligned eight wide column">
										<div class="ui small breadcrumb">
											<a class="section"> / </a>
											<!-- {{#each currentPath}} -->
												<div class="active section">{{setCurrentExplorerPath}}</div>
<!-- 												<a class="section">Home</a>
												<div class="divider"> / </div> -->
											<!-- {{/each}} -->
										</div>
									</div>
								</div>
							</th>
						</tr>
					</thead>
  					<tbody>
  						<tr class="disabled">
							<td class="ten wide">Name</td>
							<td class="three wide right aligned">Size</td>
							<td class="three wide right aligned">Updated</td>
						</tr>
					{{#each tmpFiles}}
						<tr class="positive">
							<td>
								<i class="{{setIcon directory}} icon"></i>
								<a href="#">{{title}}</a>
							</td>
							<td class="right aligned">{{#unless directory}}{{setSize size}}{{else}}-{{/unless}}</td>
							<td class="right aligned">-</td>
						</tr>
					{{/each}}
					{{#each setIndex}}
						<tr>
							<td>
								<i class="{{setIcon directory}} icon"></i>
								{{#if isEqual type "image"}}
									{{title}}
								{{else}}
									<a href="{{url}}" target="_blank" class="explorer-link" data-index="{{index}}">{{title}}</a>
								{{/if}}
							</td>
							<td class="right aligned">{{#unless directory}}{{setSize size}}{{else}}-{{/unless}}</td>
							<td class="right aligned">{{setDate timestamp}}</td>
						</tr>
						{{#if isEqual type "image"}}
						<tr>
							<td colspan="3" style="border-top: 0px">
								<div class="ui fluid rounded centered large image" href="#">
									<div class="ui fluid card">
										<a class="image thumbnail" href="{{url}}">
											<div class="ui small ribbon teal label">
												<i class="camera icon"></i>
											</div>
											<div data-href="{{url}}" style="background-image: url({{url}}); background-repeat: no-repeat; background-size: 800px; background-position: -100px; height: 150px; border-radius: 4px"></div>
										</a>
										<!-- <div class="extra content">
											<span class="left floated">
												<i class="size icon"></i>
												{{setSize size}}
											</span>
											<span class="right floated star">
												<i class="clock icon"></i>
												{{setDate timestamp}}
											</span>
										</div> -->
									</div>
								</div>
							</td>
						</tr>
						{{/if}}
					{{/each}}
					</tbody>
				</table>
			</div>
		</div>
	</div>

	
	{{#if errorMessage}}
		<div class="ui negative small message">
			<i class="close icon"></i>
			<div class="header">
				{{errorMessage}}
			</div>
		</div>
	{{/if}}

	{{> upload_modal}}
	{{> image_modal}}
	
</template>